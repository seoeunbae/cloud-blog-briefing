<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Cloud Briefing for CE</title>
    <style>
        body {
            font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            color: #3c4043;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }
        .header {
            background-color: #4285F4;
            padding: 40px;
            text-align: center;
        }
        .header h1 {
            color: #ffffff;
            font-size: 28px;
            font-weight: 500;
            margin: 0;
        }
        .greeting {
            padding: 30px;
            font-size: 16px;
        }
        .content-area {
            padding: 0 30px 30px;
        }
        .article {
            margin-bottom: 40px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 30px;
        }
        .article:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .article-title {
            font-size: 22px;
            font-weight: bold;
            color: #1a73e8;
            margin: 0 0 10px 0;
        }
        .category-container {
            border-radius: 0 8px 8px 0; /* 테두리와 이어지는 부드러운 모서리 */
        }

        .hashtag {
            display: inline-block;
            border-style: solid;
            border-color: lightslategrey;
            color: lightslategrey;
            padding: 4px 12px;
            border-radius: 4px;
            /*background-color: #e2e8f0;*/
            font-size: 13px;
            font-weight: 500;
            text-decoration: none;
            transition: background-color 0.2s ease-in-out;
            margin-right: 6px; /* 태그 사이의 오른쪽 간격 */
            margin-bottom: 6px; /* 줄바꿈 시 태그 사이의 아래쪽 간격 */
        }

        .hashtag:hover {
            background-color: #e8eaed;
            color: #202124;
        }
        .summary-box {
            padding: 20px;
            margin: 20px 0;
        }
        .summary-box.perspective {
            background-color: #f5f5f5;
            border-left: 4px solid #34a853;
        }
        .summary-box.general {
            border-left: 4px solid #fbbc05;
        }
        .summary-title {
            font-size: 16px;
            font-weight: bold;
            margin: 0 0 10px 0;
        }
        .summary-title.perspective {
            color: #34a853;
        }

        .summary-title.general {
            color: #e37400;
            font-weight: bold;
        }
        .summary-content, .full-summary-content {
            font-size: 15px;
            line-height: 1.6;
        }
        .read-more {
            display: inline-block;
            background-color: #1a73e8;
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            margin-top: 20px;
        }
        .article-date {
            font-size: 12px;
            color: #5f6368;
            margin-top: 20px;
        }
        .footer {
            background-color: #f5f5f5;
            padding: 20px;
            text-align: center;
            font-size: 12px;
            color: #5f6368;
        }
        .footer a {
            color: #1a73e8;
            text-decoration: none;
        }
        .toggle-checkbox {
            display: none !important;
            mso-hide: all; /* Specific for Outlook */
        }

        .toggle-content {
            display: none;
            width: 100%;
        }

        /* When the checkbox is checked, show the content */
        .toggle-checkbox:checked ~ .toggle-content {
            display: block !important;
        }

        .toggle-label-show, .toggle-label-hide {
            display: none;
            cursor: pointer;
        }

        /* Logic to swap the 'expand'/'collapse' text */
        .toggle-checkbox ~ .toggle-container .toggle-label-show {
            display: inline-block !important;
        }

        .toggle-checkbox:checked ~ .toggle-container .toggle-label-show {
            display: none !important;
        }

        .toggle-checkbox:checked ~ .toggle-container .toggle-label-hide {
            display: inline-block !important;
        }

    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Google Cloud Briefing for CE</h1>
    </div>


<!--    <div class="greeting">-->
<!--        안녕하세요, <strong th:text="|${role}, ${#strings.substringBefore(email, '@')}|">Subscriber</strong>님!-->
<!--        <br>-->
<!--        <div class="mt-4 flex items-center justify-between">-->
<!--            <a th:href="@{https://seoeun.demo.altostrat.com/v1/mail/archive/{email}(email=${encodedEmail})}"-->
<!--               class="inline-block px-4 py-2 rounded-lg text-white transition-all duration-300 hover:bg-green-700 hover:opacity-90 hover:underline focus:outline-none focus:ring-2 focus:ring-green-500"-->
<!--               style="margin-left: 10px;">-->
<!--                발행받은 전체 레터 보러가기-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
    <div class="greeting">
<!--        <img th:src="@{../static/images/picture.jpeg}" alt="Description of image" class="your-image-classes">-->
        <div>
<!--        <div class="bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-6 shadow-md border border-green-100 flex items-center space-x-6">-->
            <div>
<!--                <img src="https://www.gstatic.com/images/branding/product/1x/google_cloud_48dp.png" alt="Google Cloud Logo" class="w-8 h-8 mr-4">-->
<!--            <h2 class="text-xl font-semibold text-gray-800 mb-2">-->
<!--                안녕하세요, <strong th:text="|${role}, ${#strings.substringBefore(email, '@')}|" class="text-green-700">Subscriber</strong>님!-->
<!--            </h2>-->
                <div class="flex items-center space-x-4">
                    <img src="https://www.gstatic.com/images/branding/product/1x/google_cloud_48dp.png" alt="Google Cloud Logo" class="w-8 h-8">
                    <h2 class="text-xl font-semibold text-gray-800">
                        안녕하세요, <strong th:text="|${role},  ${#strings.substringBefore(email, '@')} |" class="text-green-700">Subscriber</strong>님!
                    </h2>
                </div>
<!--            <div class="mt-4">-->
<!--                <a th:href="@{https://seoeun.demo.altostrat.com/v1/mail/archive/{email}(email=${encodedEmail})}"-->
<!--                   class="inline-block px-5 py-2 bg-green-500 text-white rounded-lg shadow-md-->
<!--                      transition-all duration-300 hover:bg-green-500 hover:shadow-lg-->
<!--                      focus:outline-none focus:ring-2 focus:ring-green-400-->
<!--                      transform hover:bg-green-500 hover:-translate-y-0.5 ease-in-out">-->
<!--                <span class="flex items-center">-->
<!--&lt;!&ndash;                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">&ndash;&gt;-->
<!--&lt;!&ndash;                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>&ndash;&gt;-->
<!--&lt;!&ndash;                    </svg>&ndash;&gt;-->
<!--                    발행받은 전체 레터 보러가기-->
<!--                </span>-->
<!--                </a>-->
<!--            </div>-->
        </div>
    </div>
    </div>
    <div class="content-area">
<!--        <div th:each="category, iterStat: ${categories}">-->
        <div th:if="${articles != null}">
            <th:block th:each="entry : ${articles}">
                <div th:if="${entry.value == null or entry.value.isEmpty()}">
                    <div style="display: flex;
            align-items: center;
            background-color: #fffbeb;
            border-left: 4px solid #fbbf24;
            padding: 16px;
            border-top-right-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                        <div style="flex-shrink: 0; margin-right: 16px;">
                            <svg style="width: 24px;
                    height: 24px;
                    color: #f59e0b;"
                                 fill="none"
                                 stroke="currentColor"
                                 viewBox="0 0 24 24">
                                <path stroke-linecap="round"
                                      stroke-linejoin="round"
                                      stroke-width="2"
                                      d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                        </div>
                        <div>
                            <p style="color: #78350f;
                          font-weight: 600;
                          font-size: 1rem;
                          line-height: 1.25;">
                                <span th:text="|${entry.key} 카테고리에 발행된 이번주 아티클이 없습니다.|">
                                    카테고리 아티클 없음
                                </span>
                            </p>
                        </div>
                    </div>

                </div>
            </th:block>
        </div>
        <div class="article" th:each="articleEntry, iterStat : ${articles}">
            <div th:each="article, iterStat : ${articleEntry.getValue()}">

                <div th:if="${article != null}" class="category-container"
                      style="margin-bottom: 15px;">
                    <div th:if="${article != null }">
                        <a th:each="categoryName : ${#strings.arraySplit(article.categories, ',')}"
                           class="hashtag"
                           th:text="|# ${categoryName}|"
                           th:href="@{https://cloud.google.com/blog/products/{cate}(cate=${categoryName.toLowerCase().stripIndent().replace(' & ','-').replace(' ','-')})}"
                           style="margin-right: 6px; margin-bottom: 6px;">
                        </a>
                    </div>
                </div>


            <h2 th:text="${article.title}" th:href="${article.link}" class="article-title">Article Title</h2>

            <div class="summary-box perspective">
                <h3 class="summary-title perspective" th:text="|${#strings.substringBefore(email, '@')}님을 위한 브리핑|">Your Perspective</h3>
                <div class="summary-content" th:utext="${article.summary}">
                    Summary content will be dynamically inserted here.
                </div>
            </div>

            <div class="summary-box general">
                <h3 class="summary-title general">Short Summary</h3>
                <div class="summary-content" th:utext="${article.normalSummary}">
                    A general summary of the article will be dynamically inserted here.
                </div>
            </div>

            <div class="toggle-content" style="display:none;">
<!--                <h3 class="summary-title general">Short Summary</h3>-->
                <div class="full-summary-content" th:utext="${article.totalContent}" style="margin-top:10px;">
                     Full summary content
                </div>
            </div>

            <!--            <details>-->
<!--                <summary class="toggle-summary">-->
<!--                    Full Summary <span style="font-weight: normal; color: #5f6368; font-size: 14px;">(click to expand)</span>-->
<!--                </summary>-->
<!--                <div class="full-summary-content" th:utext="${article.total_content}" style="margin-top:10px;">-->
<!--                    Full summary content will be dynamically inserted here.-->
<!--                </div>-->
<!--            </details>-->

            <a th:if="${article.link != null}" th:href="${article.link}" class="read-more">Read More 🔗</a>
            <div class="article-date" th:text="| 발행 일자 : ${article.pubDate} |">Date</div>
                <br>
        </div>
        </div>
            <div class="mt-4 flex items-center justify-between">
                <a th:href="@{https://seoeun.demo.altostrat.com/v1/mail/archive/{email}(email=${encodedEmail})}"
                   class="inline-block px-4 py-2 rounded-lg text-white transition-all duration-300 hover:bg-green-700 hover:opacity-90 hover:underline focus:outline-none focus:ring-2 focus:ring-green-500"
                   style="margin-left: 10px;">
                    발행받은 전체 레터 보러가기
                </a>
            </div>

    </div>
    </div>
    <div class="footer">
        You're receiving this because you subscribed.
        <a th:href="${webVersionLink}"> | View in browser</a>
    </div>
</div>
</body>
</html>